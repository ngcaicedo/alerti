@use '../../../styles/colors' as *;
@use '../../../styles/fonts' as *;

.sidenav-container {
  height: 100vh;
    
  .mat-drawer-side {
    border: none !important;
  }
  
  .mat-drawer-container {
    background-color: transparent !important;
  }
}

.main-content {
  padding: 0;
  margin: 0;
  height: 100%;
}

.nav-rail {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  min-width: 72px;
  max-width: 88px;
  width: clamp(72px, 5vw, 88px);
  height: 100%;
  background-color: transparent !important;
  padding: clamp(8px, 2vh, 20px) 0;
  box-sizing: border-box;
  overflow: hidden;

  &.mat-drawer {
    background-color: transparent !important;
    border: none !important;
    box-shadow: none !important;
    position: relative;
  }

  .nav-divider {
    width: 48px;
    margin: 16px 0;
    border-top-color: rgba($m3-sys-light-on-surface, 0.2);
  }

  .middle-section {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
    gap: 12px;
    width: 100%;
  }

  .bottom-section {
    width: 100%;
    margin-top: auto;
    padding-bottom: 8px;
  }

  .nav-item {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 4px;
    width: 64px;
    height: 56px;
    cursor: pointer;
    user-select: none;
    border-radius: 16px;
    transition: background-color 0.2s ease;

    .icon-container {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 56px;
      height: 32px;
      border-radius: 16px;
      transition: background-color 0.2s ease;

      .nav-icon {
        width: 24px;
        height: 24px;
        font-size: 24px;
        color: $m3-sys-light-on-surface;
        transition: color 0.2s ease, filter 0.2s ease;
        
        // For SVG images - apply filter to match on-surface color
        &[src] {
          object-fit: contain;
          filter: brightness(0) saturate(100%) invert(9%) sepia(4%) saturate(1234%) hue-rotate(204deg) brightness(97%) contrast(92%);
        }
      }
    }

    .label-text {
      @include apply-typography($m3-body-small);
      color: $m3-sys-light-on-surface-variant;
      text-align: center;
      font-weight: 500;
      font-size: 12px;
      line-height: 16px;
      letter-spacing: 0.05em;
      transition: color 0.2s ease;
    }

    &:hover:not(.selected) {
      .icon-container {
        background-color: rgba($m3-sys-light-on-surface, $state-hover-opacity);
      }
    }

    &.selected {
      .icon-container {
        background-color: $m3-sys-light-primary-container;
        
        .nav-icon {
          color: $m3-sys-light-on-primary-container;
          
          // For selected SVG images - apply filter to match on-primary-container color
          &[src] {
            filter: brightness(0) saturate(100%) invert(87%) sepia(19%) saturate(373%) hue-rotate(180deg) brightness(99%) contrast(93%);
          }
        }
      }
      .label-text {
        font-weight: 600;
        color: $m3-sys-light-on-surface;
      }
    }

    &.logout-item {
      &:hover {
        .icon-container {
          background-color: rgba(#B3261E, $state-hover-opacity);
        }
        .nav-icon, .label-text {
          color: #B3261E;
        }
        .nav-icon[src] {
          filter: brightness(0) saturate(100%) invert(17%) sepia(84%) saturate(2324%) hue-rotate(344deg) brightness(94%) contrast(86%);
        }
      }
    }
  }
}


@media (prefers-contrast: high) {
  .nav-rail {
    .nav-item {
      border: 1px solid transparent;
      
      &:focus {
        border-color: $m3-sys-light-primary;
        outline: none;
      }
      
      &.selected {
        border-color: $m3-sys-light-primary;
      }
    }
  }
}

:host {
  ::ng-deep {
    .mat-drawer-container {
      background-color: transparent !important;
    }
    .mat-drawer {
      width: auto !important;
    }
    .mat-drawer-side {
      border-right: none !important;
    }
  }
}
